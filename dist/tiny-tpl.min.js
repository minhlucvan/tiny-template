!function(t){function e(t,e){if(!t&&"object"!=typeof t&&"string"!=typeof e)throw new Error("unexpected type passing to function getDeepValue.");var n=e.split("."),a=t;return n.forEach(function(t){a=a&&a.hasOwnProperty(t)?a[t]:null}),a}function n(t){var e=t.indexOf(f),n=t.indexOf(h,e),a=t.substring(e+3,n);return a.length<=0||0>e||0>n?"":a}function a(t,n){var a=n,i=e(t,a);return"string"!=typeof t&&"number"!=typeof t||a!=s||(i=t),null==i&&(i=c),i}function i(e,i,r,o){for(var s=t(e),c=n(i),p=i,u=0;c.length>0&&1e4>u;){var l=a(r,c);p=p.replace(f+c+h,l),c=n(p),u++}s.append(p)}function r(e,n,a){if("string"==typeof a.animate){a.hasAnimation=!0,a.animates=a.animate.split(d);for(var i=0;i<a.animates.length;i++){var r=a.animates[i];switch(r){case g:t(e).fadeOut();break;case y:t(e).hide();break;case v:a.oldHeight=t(e).height()}}}}function o(n,a,i){var r=t(n).find("[data-"+u+"]");if(r.each(function(n){var i=t(this).data(u),r=t(this).data(l),o=e(a[n],r);try{t(this).tinyTpl(o,i)}catch(f){console.error("can not render child template.")}}),i.hasAnimation)for(var o=0;o<i.animates.length;o++){var f=i.animates[o];switch(f){case g:t(n).fadeIn();break;case y:t(n).fadeIn();break;case v:var h=t(n).height();t(n).height(i.oldHeight),t(n).animate({height:h},"fast",function(){t(n).height("auto")})}}i&&"function"==typeof i.postScript&&i.postScript(n,a)}var f="{% ",h=" %}",s="value",c="",p=".tiny-pined",u="template",l="field",d="|",g="fade",y="fadein",v="expand";t.fn.tinyTpl=function(e,n,a){if("string"==typeof e||e){"object"!=typeof a&&(a={}),Array.isArray(e)||(e=[e]),"object"==typeof n&&(a=n),"string"!=typeof n&&(n=t(this).data(u));var f=t(n);if(0==f.length)throw new Error("can not find template: "+n);var h="";h="text/template"==f.attr("type")?f.html():f.get(0).outerHTML;var s=this;r(this,e,a),t(this).children().not(p).remove(),e.forEach(function(t){i(s,h,t,a)}),o(this,e,a)}}}(jQuery);